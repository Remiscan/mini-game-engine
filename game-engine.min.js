export default class Game{constructor(t,e,{canvas:s=document.querySelector("canvas"),html:i=document.querySelector("accessible-elements"),state:a={},actions:n={},frameRate:o=60}={}){this.canvas=s,this.html=i,this.state=a,this.state.controls={},this.state.actions=n,this.frameRate=o,this.paused=!1,this.start=t.bind(this),this.update=e.bind(this)}play(){this.initControls(),this.start();const t=function*(){let t=0;for(;;)this.update(),yield t,t++}.bind(this)();setInterval(()=>{this.paused||t.next()},1e3/this.frameRate)}pause(){this.paused=!0}unpause(){this.paused=!1}initControls(){document.addEventListener("keydown",t=>{const e=t.code||t.key;let s=this.state.controls[e];const i=this.state.actions.filter(t=>t.controls.includes(e));i.map(t=>t.active=!0),void 0===s&&(this.state.controls[e]={pressed:!1,startTime:null,endTime:null}),s=s||this.state.controls[e],s.pressed=!0,s.startTime=Date.now(),s.endTime=null}),document.addEventListener("keyup",t=>{const e=t.code||t.key;let s=this.state.controls[e];const i=this.state.actions.filter(t=>t.controls.includes(e));i.map(t=>t.active=!1),void 0!==s&&(s.pressed=!1,s.startTime=null,s.endTime=Date.now())})}get currentActions(){return this.state.actions.filter(t=>t.active).map(t=>t.name)}}