import*as GEM from"../game-engine.js";let player,rect;const actions={jump:["Space"]},state={jumpFrames:0,startTime:performance.now()},start=async function(){const t=this.addLevel({id:"test0"});t.addImage("boole","assets/boole1.png"),t.addObject({width:this.width,height:this.height,draw:function(t){t.fillStyle="black",t.fillRect(0,0,this.width,this.height)}}),rect=t.addObject({id:"rect",width:32,height:32,position:{x:64,y:64},collision:!0,draw:function(t){this.allCollisions().length>0?t.fillStyle="red":t.fillStyle="blue",t.fillRect(this.position.x,this.position.y,this.width,this.height)}}),t.addObject({id:"player",width:32,height:32,position:{x:32,y:128},maxSpeed:5,controllable:!0,collision:!0,assets:["boole"],draw:function(t,{x:e,y:i,game:s}){const a=this.assets.find((t=>"boole"===t.id)).data;t.imageSmoothingEnabled=!1,this.angle>-Math.PI/2&&this.angle<Math.PI/2?(t.translate(s.width,0),t.scale(-1,1),t.drawImage(a,s.width-e,i,-this.width,this.height)):t.drawImage(a,e,i,this.width,this.height)}}),await this.loadLevel("test0")},update=function(t){const e=performance.now();this.state.actions.includes("jump")?this.state.jumpFrames++:this.state.jumpFrames>0&&(this.state.jumpFrames=0);const i=this.state.level.objects.filter((t=>t.controllable));for(const e of i){const i={x:(-this.state.actions.includes("left")+this.state.actions.includes("right"))*t,y:(-this.state.actions.includes("up")+this.state.actions.includes("down"))*t};0===i.x&&0===i.y||e.moveByVector(i)}this.state.startTime=e},game=new GEM.Game(start,update,[],{tickRate:60,actions:actions,state:state}),buttonPlay=document.querySelector(".load-game");buttonPlay.addEventListener("click",(()=>{buttonPlay.remove(),game.play()}));const buttonPause=document.querySelector(".pause-game");buttonPause.addEventListener("click",(()=>game.paused=!game.paused));